<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Manager Bot</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
</head>
<body>
    <!-- Все предыдущие секции остаются -->
    <!-- Добавим только новые модальные окна -->
    
    <!-- Модальное окно профиля -->
    <div id="profile-modal" class="modal">
        <div class="modal-content profile-modal">
            <div class="modal-header">
                <h2><i class="fas fa-user-circle"></i> Мой профиль</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="profile-header">
                    <div class="avatar-container">
                        <img id="user-avatar" src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Аватар">
                        <div class="avatar-status" id="status-indicator"></div>
                    </div>
                    <div class="profile-info">
                        <h3 id="profile-username">@username</h3>
                        <div class="user-id">ID: <span id="user-id">123456789</span></div>
                        <div class="join-date">
                            <i class="fas fa-calendar-alt"></i>
                            Присоединился: <span id="join-date">01.01.2024</span>
                        </div>
                    </div>
                </div>

                <div class="profile-stats">
                    <div class="stats-grid">
                        <div class="stat-box" id="active-stat">
                            <div class="stat-icon">
                                <i class="fas fa-clock"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number" id="stat-active">0</div>
                                <div class="stat-label">Активные</div>
                            </div>
                        </div>
                        
                        <div class="stat-box" id="completed-stat">
                            <div class="stat-icon">
                                <i class="fas fa-check-circle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number" id="stat-completed">0</div>
                                <div class="stat-label">Завершённые</div>
                            </div>
                        </div>
                        
                        <div class="stat-box" id="overdue-stat">
                            <div class="stat-icon">
                                <i class="fas fa-exclamation-triangle"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number" id="stat-overdue">0</div>
                                <div class="stat-label">Просроченные</div>
                            </div>
                        </div>
                        
                        <div class="stat-box" id="total-stat">
                            <div class="stat-icon">
                                <i class="fas fa-tasks"></i>
                            </div>
                            <div class="stat-content">
                                <div class="stat-number" id="stat-total">0</div>
                                <div class="stat-label">Всего задач</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="progress-section">
                    <h4><i class="fas fa-chart-line"></i> Продуктивность</h4>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progress-fill" style="width: 75%"></div>
                    </div>
                    <div class="progress-info">
                        <span>Коэффициент выполнения: <strong id="completion-rate">75%</strong></span>
                    </div>
                </div>

                <div class="achievements">
                    <h4><i class="fas fa-trophy"></i> Достижения</h4>
                    <div class="achievement-list">
                        <div class="achievement-item" data-achieved="true">
                            <i class="fas fa-star"></i>
                            <span>Первая задача</span>
                        </div>
                        <div class="achievement-item" data-achieved="false">
                            <i class="fas fa-fire"></i>
                            <span>Страйк 3 дня</span>
                        </div>
                        <div class="achievement-item" data-achieved="true">
                            <i class="fas fa-bolt"></i>
                            <span>Быстрый исполнитель</span>
                        </div>
                        <div class="achievement-item" data-achieved="false">
                            <i class="fas fa-gem"></i>
                            <span>100 монет</span>
                        </div>
                    </div>
                </div>

                <div class="profile-settings">
                    <h4><i class="fas fa-cog"></i> Настройки профиля</h4>
                    <div class="settings-list">
                        <div class="setting-item">
                            <span>Тёмная тема</span>
                            <label class="switch">
                                <input type="checkbox" id="dark-mode-toggle">
                                <span class="slider"></span>
                            </label>
                        </div>
                        <div class="setting-item">
                            <span>Уведомления</span>
                            <label class="switch">
                                <input type="checkbox" id="notifications-toggle" checked>
                                <span class="slider"></span>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Модальное окно магазина (обновлённое) -->
    <div id="shop-modal" class="modal">
        <div class="modal-content shop-modal">
            <div class="modal-header">
                <h2><i class="fas fa-store"></i> Магазин улучшений</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="shop-balance">
                    <i class="fas fa-coins"></i>
                    <span>Ваш баланс: <strong id="shop-balance">0</strong> монет</span>
                </div>

                <div class="shop-tabs">
                    <button class="shop-tab active" data-tab="themes">Темы</button>
                    <button class="shop-tab" data-tab="games">Мини-игры</button>
                    <button class="shop-tab" data-tab="colors">Цвета</button>
                </div>

                <!-- Вкладка тем -->
                <div class="shop-content active" id="themes-tab">
                    <div class="shop-item">
                        <div class="item-info">
                            <div class="item-icon">
                                <i class="fas fa-moon"></i>
                            </div>
                            <div class="item-details">
                                <h4>Тёмная тема</h4>
                                <p>Смените оформление приложения на тёмное</p>
                            </div>
                        </div>
                        <div class="item-action">
                            <div class="item-price">
                                <i class="fas fa-coins"></i> 30
                            </div>
                            <button class="shop-buy-btn" data-item="dark_theme">
                                <span id="dark-theme-status">Купить</span>
                            </button>
                        </div>
                    </div>

                    <div class="shop-item">
                        <div class="item-info">
                            <div class="item-icon">
                                <i class="fas fa-sun"></i>
                            </div>
                            <div class="item-details">
                                <h4>Контрастная тема</h4>
                                <p>Высококонтрастный режим для лучшей читаемости</p>
                            </div>
                        </div>
                        <div class="item-action">
                            <div class="item-price">
                                <i class="fas fa-coins"></i> 50
                            </div>
                            <button class="shop-buy-btn" data-item="contrast_theme">
                                Купить
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Вкладка игр -->
                <div class="shop-content" id="games-tab">
                    <div class="shop-item">
                        <div class="item-info">
                            <div class="item-icon">
                                <i class="fas fa-fist-raised"></i>
                            </div>
                            <div class="item-details">
                                <h4>Haster Combat</h4>
                                <p>Мини-игра в стиле хакерских сражений</p>
                                <small>Доход: до 10 монет за игру</small>
                            </div>
                        </div>
                        <div class="item-action">
                            <div class="item-price">
                                <i class="fas fa-coins"></i> 40
                            </div>
                            <button class="shop-buy-btn" data-item="haster_combat">
                                <span id="haster-status">Купить</span>
                            </button>
                        </div>
                    </div>

                    <div class="shop-item">
                        <div class="item-info">
                            <div class="item-icon">
                                <i class="fas fa-bomb"></i>
                            </div>
                            <div class="item-details">
                                <h4>Сапёр</h4>
                                <p>Классическая игра на поиск мин</p>
                                <small>Доход: до 5 монет за игру</small>
                            </div>
                        </div>
                        <div class="item-action">
                            <div class="item-price">
                                <i class="fas fa-coins"></i> 20
                            </div>
                            <button class="shop-buy-btn" data-item="minesweeper">
                                <span id="minesweeper-status">Купить</span>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Вкладка цветов -->
                <div class="shop-content" id="colors-tab">
                    <div class="color-picker-section">
                        <h4>Выберите цвет интерфейса</h4>
                        <p>Введите HEX-код цвета или выберите из палитры:</p>
                        
                        <div class="color-input-group">
                            <input type="color" id="color-picker" value="#6a11cb">
                            <input type="text" id="color-hex" placeholder="#6a11cb" maxlength="7">
                            <button id="apply-color">Применить</button>
                        </div>

                        <div class="color-presets">
                            <div class="color-preset" style="background-color: #6a11cb;" data-color="#6a11cb"></div>
                            <div class="color-preset" style="background-color: #ff6b6b;" data-color="#ff6b6b"></div>
                            <div class="color-preset" style="background-color: #4CAF50;" data-color="#4CAF50"></div>
                            <div class="color-preset" style="background-color: #2196F3;" data-color="#2196F3"></div>
                            <div class="color-preset" style="background-color: #9c27b0;" data-color="#9c27b0"></div>
                            <div class="color-preset" style="background-color: #ff9800;" data-color="#ff9800"></div>
                        </div>

                        <div class="color-preview">
                            <h5>Предпросмотр:</h5>
                            <div class="preview-element" id="color-preview">
                                <div class="preview-button">Кнопка</div>
                                <div class="preview-card">Карточка</div>
                                <div class="preview-text">Текст</div>
                            </div>
                        </div>

                        <div class="color-price">
                            <i class="fas fa-coins"></i> 25 монет
                            <button class="shop-buy-btn" data-item="custom_color">
                                Разблокировать
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Игра Haster Combat (будет появляться при запуске) -->
    <div id="game-modal" class="modal game-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-gamepad"></i> Haster Combat</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="game-container" id="haster-game">
                    <!-- Игра будет генерироваться в JS -->
                </div>
                <div class="game-controls">
                    <div class="game-stats">
                        <div>Счёт: <span id="game-score">0</span></div>
                        <div>Время: <span id="game-time">60</span>с</div>
                        <div>Монеты: <span id="game-coins">0</span></div>
                    </div>
                    <button id="start-game" class="game-btn">Начать игру</button>
                    <button id="cashout-game" class="game-btn" disabled>Забрать монеты</button>
                </div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>